---
layout: post
title: Graphics0
date: 2021-10-22 00:38:58 +0900
category: Graphics
---

###병목 측정

> 유니티 내장 프로파일러를 활용

Windows > Analysis > Profiler

Development Build로 빌드한 뒤 앱을 실행하여 프로파일링

<br>

프로파일링 데이터가 표시 안되면

Active Profiler 에서 AndroidPlayer를 선택

Record 버튼 누르기


<br>

CPU , GPU중 병목을 탐지 할 수 있지만

GPU 어느 부분이 문제가 되는지는 알 수 없음

<br>

###GPU 병목 탐지

Xcode를 활용하여 GPU 프로파일링이 가능

> 필레이트

GPU 병목중 높은 확률로 필레이트가 원인

필레이트 : 그래픽 카드가 1초에 스크린에 렌더링 할 수 있는 픽셀의 수
( 게임 렌더링에서는  화면 픽셀 수 * 프래그먼트 쉐이더 복잡도 * 오버드로우 )

<br>

**필레이트가 문제인지 간단하게 확인하는 방법**

디스플레이 해상도 변경하여 성능이 대폭 변화하는지

> 오버드로우

하나의 픽셀에 덧그리는 현상

불투명 오브젝트는 앞에서 뒤로 그리기 때문에 앞에먼저 그린 픽셀은 더이상 건드리지 않음

하지만 투명 오브젝트는 뒤에서 앞으로 그리기 때문에 겹치는 픽셀을 여러번 덧그리게 됨.

블렌딩 연산을 위해서 현재 연산하는 픽셀컬러와 기존 프레임 버퍼에 있는 픽셀 컬러를 혼합하기 때문에 투명 오브젝트는 최소한으로 사용 할 것

파티클은 오버드로우가 과도하게 발생하기 쉬움 ( 씬 뷰에 좌측상단 드로우 모드를 오버드로우로 바꾸면 확인 가능 )

> 포스트 프로세싱

이미지 효과! 쉬운 해결책은 해상도를 낮추는것

Color grading 이나 Bloom 은 모바일에서도 괜찮은 편

DOF는 성능 부담이 크다.

> 업스케일 샘프링

게임 화면 해상도는 줄이고 UI해상도는 원래대로 두기

해상도가 줄었지만 안줄어들도록 보이게하는 트릭

